vwphotographydetails

SELECT 	pic.id AS `Id`,
			pic.filename AS `Filename`,
			loc.`reference` AS `Location`,
			pic._path AS `Path`,
			pic.title AS `Title`,
			vw.Wordlist AS `Keywords`
FROM tblphotography pic
LEFT JOIN tbllocation loc
	ON loc.id = pic.location_id
LEFT JOIN vwphotographykeywords Vw
	ON vw.PicId = pic.id;
	
	
vwphotographykeywords

SELECT 	pic.id AS `PicId`,
			word.id AS `WordId`, 
			GROUP_CONCAT(DISTINCT word.word SEPARATOR ',') AS `Wordlist`
FROM tblphotography pic
LEFT JOIN tblphotographykeywords picwords 
		ON picwords.photography_id = pic.id
LEFT JOIN tblkeyword word 
	ON word.id = picwords.keyword_id;
	
vwphotographywithranking

create function p1() returns INTEGER DETERMINISTIC NO SQL return @p1;

SELECT 	pic.Id,
			pic.Filename,
			IFNULL(pic.Location,'') AS 'Location',
			pic.Path AS 'Path',
			CASE WHEN LOCATE('slide',pic.Path) > 0
			 THEN 1 /* Photography.PhysicalSource.slide */
			 ELSE 0 /* Photography.PhysicalSource.negative */
			END AS 'Source',
			pic.Title,
			IFNULL(pic.Keywords,'') AS 'Keywords',
			IFNULL(r._rank,0) AS 'Rank',
			IFNULL(udfGetAverageRank(pic.Id),0) AS 'AverageRank'
FROM vwPhotographyDetails pic
LEFT JOIN tblRanking r
ON r.user_id = p1())
AND r.photography_id=pic.id;;

select v.* from (select @p1:=1 p) parm , vwphotographywithranking v;